{"id":1946,"version":52,"subVersion":3,"packageVersion":"3.4.3-alpha.8","serverVersion":11,"lang":"en","new_changes":true,"published":true,"publishedWeb":false,"accessKeys":["merlin"],"langCodes":["en"],"title":"Merlin Adventure","studyDescription":"<div>Help the wizard Merlin (and Selina), by participating in this quest/test/study.</div>","studyTag":"Merlin","postInstallInstructions":"<div>First, introduce yourself to the wizard. Then, fill out the \"The Caves of Esm\" \"questionnaire\" once per day.</div><br><div>The wizard will ask you for a name. This can be your real name or any name you invent or choose.</div>","contactEmail":"selina.volsa@kl.ac.at","questionnaires":[{"internalId":93225,"completableOnce":true,"endScriptBlock":"globals.story_step = \"entrance_start\";\nglobals.met_the_wizard = true;\nlog(globals.name..\" has embarked on their quest!\");\nsetVirtualItem(\"started\", globals.name);\nsetVirtualItem(\"class\", globals.class);\ntriggerQuestionnaire(26683, \"It is time to delve into the dungeons of Esm!\", -1);","virtualInputs":["started","class"],"showPagination":false,"showSkipToast":false,"title":"Meet the Wizard","actionTriggers":[{"actions":[{"msgText":"It is time to delve into the dungeons of Esm!"}],"schedules":[],"eventTriggers":[{"delaySec":60}]}],"pages":[{"inputs":[{"responseType":"text","name":"intro_1","text":"<div>Welcome adventurer!</div><div>I am the wizard Merlin, and I am in need of your help. The kingdom is in peril, and only the Amulet of Aniles can save us. Legend tells that it lies buried deep in the dwarven city of Esm. It is your quest to travel there and retrieve it. But first, tell me about yourself.</div>","listChoices":[],"subInputs":[]},{"name":"name","text":"<div>How should I call you?</div>","listChoices":[],"subInputs":[]}]},{"inputs":[{"responseType":"text","name":"intro_2","textScript":"name = getQuestionnaireVar(\"name\");\nglobals.name = name;\n\"It is my pleasure to meet you, \"..name..\"!\";","listChoices":[],"subInputs":[]},{"responseType":"list_single","name":"class_selection","required":true,"asDropDown":false,"forceInt":true,"text":"<div>Now, tell me, how would you describe yourself.</div>","listChoices":["I am a knight, a mighty warrior (+2 power)","I am a rogue, a cunning thief (+2 cunning)","I am an archer, a trained athlete (+2 agility)"],"subInputs":[]}]},{"inputs":[{"responseType":"list_single","name":"bonus_warrior","asDropDown":false,"forceInt":true,"relevance":"if(getQuestionnaireVar(\"class_selection\") == 1){\n  globals.class = \"knight\";\n  return true;\n} else {\n  return false;\n}","text":"<div>A knight is just what we need!</div><div>Any other noteworthy talents?</div>","listChoices":["I am a tactician (+1 cunning)","I overwhelm my enemies with my speed (+1 agility)"],"subInputs":[]},{"responseType":"list_single","name":"bonus_rogue","asDropDown":false,"forceInt":true,"relevance":"if(getQuestionnaireVar(\"class_selection\") == 2){\n  globals.class = \"rogue\";\n  return true;\n} else {\n  return false;\n}","text":"<div>A rogue is just what we need!</div><div>Any other noteworthy talents?</div>","listChoices":["I can hold myself in a fight (+1 power)","I outrun my foes (+1 agility)"],"subInputs":[]},{"responseType":"list_single","name":"bonus_archer","asDropDown":false,"forceInt":true,"relevance":"if(getQuestionnaireVar(\"class_selection\") == 3){\n  globals.class = \"archer\";\n  return true;\n} else {\n  return false;\n}","text":"<div>An archer is just what we need!</div><div>Any other noteworthy talents?</div>","listChoices":["I am accustomed to my longbow (+1 power)","I can anticipate my enemies (+1 cunning)"],"subInputs":[]}]},{"inputs":[{"responseType":"text","name":"intro_3","textScript":"\"I think now I know everything I need to know, \"..globals.name..\" the \"..globals.class..\".\";","listChoices":[],"subInputs":[]},{"responseType":"text","name":"intro_4","textScript":"init{\nglobals.stats = object;\nglobals.stats.power = 0;\nglobals.stats.agility = 0;\nglobals.stats.cunning = 0;\nglobals.health = 100;\nglobals.max_health = 100;\nglobals.inventory = object;\n}\nif(globals.class == \"knight\") {\n  globals.stats.power = 2;\n  if(getQuestionnaireVar(\"bonus_warrior\") == 1) {\n    globals.stats.cunning = 1;\n  } else {\n    globals.stats.agility = 1;\n  }\n}\nif(globals.class == \"rogue\") {\n  globals.stats.cunning = 2;\n  if(getQuestionnaireVar(\"bonus_rogue\") == 1) {\n    globals.stats.power = 1;\n  } else {\n    globals.stats.agility = 1;\n  }\n}\nif(globals.class == \"archer\") {\n  globals.stats.agility = 2;\n  if(getQuestionnaireVar(\"bonus_archer\") == 1) {\n    globals.stats.power = 1;\n  } else {\n    globals.stats.cunning = 1;\n  }\n}\n\n\"These are your starting stats:\n\n\nClass: <b>\"..globals.class..\"</b>\n\nPower: <b>\"..globals.stats.power..\"</b>\n\nAgility: <b>\"..globals.stats.agility..\"</b>\n\nCunning: <b>\"..globals.stats.cunning..\"</b>\n\nHealth: <b>\"..globals.health..\"/\"..globals.max_health..\"</b>\";","listChoices":[],"subInputs":[]},{"responseType":"text","name":"intro_5","text":"<div>You are now ready to venture forth into the Caves of Esm. I wish you the best of luck, adventurer!</div>","listChoices":[],"subInputs":[]}]}],"sumScores":[]},{"internalId":26683,"completableOncePerNotification":true,"isBackEnabled":false,"endScriptBlock":"init{\nglobals.found_maze_exit = false;\n}\nif(globals.story_step == \"maze\" and globals.found_maze_exit == true) {\n  globals.story_step = \"dragon\";\n}\nsetVirtualItem(\"health\", globals.health);","virtualInputs":["health","finished","died"],"showPagination":false,"showSkipToast":false,"title":"The Caves of Esm","actionTriggers":[{"actions":[{"msgText":"It is time to delve into the dungeons of Esm!"}],"schedules":[{"skipFirstInLoop":true,"signalTimes":[{"startTimeOfDay":43224366}]}],"eventTriggers":[]}],"pages":[{"inputs":[{"responseType":"text","name":"first_page","text":"<div>Another day, another part of your adventure...</div>","listChoices":[],"subInputs":[]}],"relevance":"true;"},{"inputs":[{"responseType":"text","name":"entrance_info","text":"<div>After a short journey you arrive at the entrance to Esm. Hewn into solid rock you see an impressive stone door, covered in intricate detail. Whatever armies these doors withstood, they did not withstand time. Coming closer you see cracks and openings in the rock, some of which might be large enough for you to fit through. Looking through the crack you see an entrance area, as well as a stairwell descending into the mountain.</div>","listChoices":[],"subInputs":[]},{"responseType":"list_single","name":"entrance_decision","asDropDown":false,"forceInt":true,"text":"<div>What do you do?</div>","listChoices":["Delve into the mountain","Search the entrance area","Search for any other, hidden entrances"],"subInputs":[]}],"relevance":"init{\nglobals.story_step == 0;\n}\nif(globals.story_step == \"entrance_start\") {\nglobals.story_step = \"entrance_result\";\nreturn true;\n}\nreturn false;"},{"inputs":[{"responseType":"text","name":"entrance_delve","relevance":"if(getQuestionnaireVar(\"entrance_decision\") == 1){\n  globals.story_step = \"maze_start\";\n  return true;\n}\nreturn false;","text":"<div>You squeeze through one of the openings and make your way into the mountain. Entering the darkness, you wonder what you will find...</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"entrance_search_start","relevance":"if(getQuestionnaireVar(\"entrance_decision\") == 2) {\n  globals.search = 0;\n  return true;\n}\nreturn false;","text":"<div>You squeeze through one of the openings and make your way into the mountain. Dust covers the entrance hall and you see debris and rusty tools strewn about. Taking a door into a room to the side you find what must have been barracks in the past. You begin your search...</div><div><br></div><div>(You'll find out the results of your search next time)</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"entrance_search_result","relevance":"init{\nglobals.search = none;\n}\n\nif(globals.search == 0) {\nglobals.search = 1;\n} elif(globals.search == 1) {\nglobals.search = none;\nglobals.story_step = \"maze_start\";\nreturn true;\n}\nreturn false;","textScript":"difficulty_map = 4;\nroll_map = random(1, 6) + globals.stats.cunning;\nroll_map_passed = roll_map >= difficulty_map;\n\ndifficulty_trap = 5;\nroll_trap = random(1, 6) + globals.stats.cunning;\nroll_trap_passed = roll_trap >= difficulty_trap;\n\nout = \"You search through the ancient entrance halls of this fallen dwarven city. \nThe sights of the remains of this civilization are awe, inspiring. \";\n\nif(roll_trap_passed) {\nout = out..\"As you stroll through a corridor, you find signs of an intact spear trap \"..\n\"(passed cunning check). \"..\n\"You are careful to avoid it.\";\n}else{\ndamage = max([random(1, 10) - globals.stats.agility, 0]);\nglobals.health = globals.health - damage;\nout = out..\"As you stroll through a corridor, you fail to notice a still intact spear trap, which acivates. \"..\n\"(failed cunning check). \"..\n\"The spear pierces you for \"..damage..\" damage.\";\nif(globals.health <= 0){\nglobals.story_step = \"dead\";\nreturn out;\n}\n}\n\nout = out..\"\n\nYou wonder what could be important enough to necessitate a trap, and search through the next room. \";\n\nif(roll_map_passed) {\nout = out..\" This seems to have once been an office. Rifling through the moldy papers on the remains of a desk you find an ancient map of some kind of maze (cunning check passed). This could be useful, so you pocket it and take it with you. \";\nglobals.map = true;\n}else{\nout = out..\" This seems to have once been an office. You rifle through the moldy papers, but despite your efforts you find nothing of use (cunning check failed). \";\n}\n\nout = out..\"By now you have pretty much searched all of the entrance area, so it is time for you to delve deeper into the caves...\";\nreturn out;","text":"<div>Generated Text</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"entrance_side_start","relevance":"if(getQuestionnaireVar(\"entrance_decision\") == 3) {\n  globals.side_entrance = 0;\n  return true;\n}\nreturn false;","text":"<div>You turn away from the looming entrance into the mountain and start searching the surrounding rock. This search will take some time... </div><br><div>(You'll find out the results of your search next time)</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"entrance_side_result","relevance":"init{\n  globals.side_entrance = none;\n}\n\nif(globals.side_entrance == 0) {\nglobals.side_entrance = 1;\n} elif(globals.side_entrance == 1) {\nglobals.side_entrance = none;\nglobals.story_step = \"maze_start\";\nreturn true;\n}\nreturn false;","textScript":"difficulty_find = 3;\nroll_find = random(1, 6) + globals.stats.cunning;\nroll_find_passed = roll_find >= difficulty_find;\n\ndifficulty_climb = 6;\nroll_climb = random(1, 6) + globals.stats.agility;\nroll_climb_passed = roll_climb >= difficulty_climb;\n\nif(!roll_find_passed) {\nreturn \"You let your gaze move over the rock, only to realize that the dwarves have built an impenetrable fortress here. \"..\n\" You find no other entrances (cunning check failed). Still, you need to move forward, so you slip through one of the cracks in the giant rock door and make your way deeper into the mountain ...\";\n}\nout = \"Your intuition tells you that the dwarven furnaces would have required a system of chimneys. \"..\n\"You let your gaze move over the rock above the entrance, and sure enough you find small openings (cunning check passed). \"..\n\"Looking below you find a suitable albeit challenging climbing route in the rock.\n\n\";\n\nif(roll_climb_passed) {\nout = out..\"The climb up to the chimneys is slightly exhausting, but goes by without complications (agility check passed). \";\n}else{\ndamage = max([random(1, 10) - globals.stats.agility, 0]);\nglobals.health = globals.health - damage;\nout = out..\"The climb up to the chimney proves more difficult than you expected. \"..\n\"More than once you slip and get scraped by the sharp stone (agility check failed). \"..\n\"You sustain \"..damage..\" damage. \";\nif(globals.health <= 0){\nglobals.story_step = \"dead\";\nreturn out;\n}\nout = out..\"After a bit more effort, you make it to the top. \";\n}\n\nglobals.shortcut = true;\nout = out..\"You find a chimney of suitable size and begin to rapel down into the darkness ...\";\n\nreturn out;","text":"<div>Generated Text</div>","listChoices":[],"subInputs":[]}],"relevance":"globals.story_step == \"entrance_result\";"},{"inputs":[{"responseType":"text","name":"maze_entry_shortcut","relevance":"init{\nglobals.shortcut = false;\n}\nif(globals.shortcut){\nglobals.found_maze_exit = true;\nreturn true;\n}\nfalse;","text":"<div>After rapeling down your rope through the chimney, you exit through an old furnace in a desolate underground smithy. Taking a look around the area, you find the entrance to what appears to be some kind of maze. Luckily, before you enter and maybe get lost in it you notice a stairwell leading downwards. Using the chimney you must have bypassed the maze. You continue deeper into the mountain...</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"maze_entry_map","relevance":"init{\nglobals.map = false;\n}\nglobals.map;","text":"<div>Descending from the entry hall you enter a narrow corridor. Your light allows you to see only a bit further, but halfway into the darkness you can see the corridors forking off into multiple paths. You realize that you are in a maze.</div><br><div>However, something about the layout of this place seems familiar. Then you remember the map you found. You quickly identify the entrance you have just taken, end the exit you need to find. It doesn't take long for you to map out a path between them. Making shure to keep track of every twist and turn, you head into the maze.</div>","listChoices":[],"subInputs":[]},{"responseType":"list_single","name":"maze_fork","asDropDown":false,"forceInt":true,"relevance":"!(globals.map or globals.shortcut);","textScript":"out = none;\nif(globals.maze_step == 0) {\nout = \"Descending from the entry hall you enter a narrow corridor. Your light allows you to see only a bit further, but halfway into the darkness you can see the corridors forking off into multiple paths. You realize that you are in a maze.  \";\n} else {\nout = \"For \"..globals.maze_step..\"day\";\nif(globals.maze_step > 1){out = out..\"s\";}\nout = out..\" now you have been walking the corridors of the maze, and you have no idea where in it you are. \";\n}\nout = out..\"\n\nYou are now standing at a fork with three paths forward. Which do you take?\";\n\nreturn out;","text":"<div>Generated Text</div>","listChoices":["The left path","The middle path","The right path"],"subInputs":[]}],"relevance":"init{globals.maze_step = -1;}\nif(globals.story_step == \"maze_start\") {\nglobals.story_step = \"maze\";\nreturn false;\n}\nif(globals.story_step == \"maze\"){\nglobals.maze_step = globals.maze_step + 1;\nreturn true;\n}\nfalse;"},{"inputs":[{"responseType":"text","name":"maze_finished","relevance":"globals.found_maze_exit == true;","text":"<div>After following what seemed like endless twists and turns of the labyrinthine corridors, you finally emerge into a hall, at the end of which you find a stairwell leading downwards. You have mastered the dwarven maze, and descend further into the depths...</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"maze_lost","relevance":"globals.found_maze_exit == false;","textScript":"out = \"You followed your gut, but it seems like your gut has \";\nif(globals.maze_step >= 1){out = out..\"once again \";}\nout = out..\"betrayed you.\";\nif(globals.maze_step < 1){\n  out = out..\"You are\";\n} else {\n  out = out..\"You remain\";\n}\nout = out..\"lost in the labyrintine corridors of the maze.\";\nreturn out;","text":"<div>Generated Text</div>","listChoices":[],"subInputs":[]}],"relevance":"init{\nglobals.shortcut = false;\nglobals.map = false;\nglobals.maze_step = -1;\n}\nif(globals.story_step == \"maze\" and globals.maze_step >= 0){\n  if(globals.shortcut){\n    return false;\n  }\n  if(globals.map){\n    globals.found_maze_exit = true;\n  }elif(getQuestionnaireVar(\"maze_fork\") == random(1,3) or globals.maze_step >= 3) {\n    globals.found_maze_exit = true;\n  }\n\n  return true;\n}\n\nfalse;"},{"inputs":[{"responseType":"text","name":"dragon_info_1","relevance":"init{\n  globals.fight_dragon = 0;\n  globals.dragon_health = 20;\n}\nif(globals.fight_dragon == 0) {\nglobals.fight_dragon = 1;\nreturn true;\n} else {\nreturn false;\n}","text":"<div>After descending the steps from the maze, you find yourself in a dark hall. You can see a faint light illuminating a staircase that descends at to other end of the room. This must be the way to the treasure room! You start towards the light, but you soon realize that your footsteps have awakened something. A giant shape emerges from the shadows and bars the way forward. The faint light reveals a massive outline. Suddently, a firy glow lights up the shape from the inside, and you recognize the shape as a dragon. A dragon preparing to bathe you in its fire breath. You will have to fight this beast!</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"dragon_info_2","relevance":"globals.fight_dragon == 1;","textScript":"\"You find yourself in a vast, dark hall, long shadows cast by flames all around you. \"..\n\"In front of you is the giant dragon, and you are still locked in a fight with it.\"..\n\"\n\nYour Health: <b>\"..globals.health..\"/\"..globals.max_health..\n    \"</b>, Dragon's health: <b>\"..globals.dragon_health..\"/\"..20..\"</b>.\";","text":"<div>You find yourself in a vast, dark hall, long shadows cast by flames all around you. In front of you is the giant dragon, and you are still locked in a fight with it.</div>","listChoices":[],"subInputs":[]},{"responseType":"likert","name":"dragon_approach","likertSteps":10,"vertical":true,"text":"<div>How do you want to approach this fight? An aggressive stance could mean that you deal more damage, but will also receive more damage. Conversely, a defensive stance might allow you to sustain less damage, but you will also deal less damage.</div>","leftSideLabel":"aggressive","rightSideLabel":"devensive","listChoices":[],"subInputs":[]}],"relevance":"globals.story_step == \"dragon\";"},{"inputs":[{"responseType":"text","name":"fight_result","textScript":"\"You hit the dragon for \"..globals.dragon_fight_results.damage_dealt..\n\" damage, reducing its health to \"..globals.dragon_health..\".\"..\n\"The dragon hit you for \"..globals.dragon_fight_results.damage_received..\n\" damage, leaving you at \"..globals.health..\" health.\";","listChoices":[],"subInputs":[]},{"responseType":"text","name":"fight_result_continue","relevance":"globals.dragon_health > 0 and globals.health > 0;","text":"<div>Despite your efforts, the dragon still blocks your way. You will have to keep fighting it.</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"fight_result_win","relevance":"globals.dragon_health <= 0 and globals.health > 0;","text":"<div>With one final attack you fell the beast, and it's fire starts to slowly extinguish. You climb over the dragon's lifeless body, your eyes on your way forward. You are now very close to the amulet, you can almost feel it in your hands...</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"fight_result_lose","relevance":"globals.health <= 0;","text":"<div>You have fought well, but alas, you succumb to your wounds...</div>","listChoices":[],"subInputs":[]}],"relevance":"if(globals.story_step != \"dragon\"){\n  return false;\n}\n\ndefensive = getQuestionnaireVar(\"dragon_approach\");\nglobals.dragon_fight_results = object;\nglobals.dragon_fight_results.damage_dealt = \n  max([0, random(1, 16) - defensive + globals.stats.power]);\nglobals.dragon_fight_results.damage_received =\n  max([0, (random(1, 16) - defensive + globals.stats.agility) * 2 + random(0, 1)]);\n\nglobals.health = max([globals.health - globals.dragon_fight_results.damage_received, 0]);\nglobals.dragon_health = max([globals.dragon_health - globals.dragon_fight_results.damage_dealt, 0]);\n\nif(globals.dragon_health == 0) {\nglobals.story_step = \"dragon_vanquished\";\n}\n\nif(globals.health == 0) {\nglobals.story_step = \"dead\";\n}\n\nreturn true;"},{"inputs":[{"responseType":"text","name":"ending_text","textScript":"init{\n  globals.logged_victory = false;\n}\nout = \"You emerge from the stairwell into cave that is bathed in warm glow. \nScattered about are gold coins, jewels, and other rarities, that seem to give off this mysterious light on their own. \nAfter a moment of adjusting your eyes and taking in this glorious sight, you notice a pedestal in the middle of the room. \nIt's a short column, hewn from the rock, decorated with dwarven inscriptions and imagery. \nAnd there, upon it, you see what you've been searching for. The Amulet of Aniles.\n\n\";\n\ndifficulty = 5;\nroll = random(1, 6) + globals.stats.cunning;\nroll_passed = roll >= difficulty;\n\ntrap_triggered = true;\n\nif(roll_passed){\nout = out..\"As you approach the pedestal, something catches your eye. \nYou notice that the amulet is resting on a pressure plate (cunning check passed). This is obviously a trap. \nYou quickly take bag out of your pack and fill it with some coins from the chamber, so that it should roughly weigh the same as the amulet. \nThen, as careful as you can, you switch the bag and the amulet. \";\n\ndifficulty = 3;\nroll = random(1, 6) + globals.stats.agility;\nroll_passed = roll >= difficulty;\n\n  if(roll_passed) {\n    trap_triggered = false;\n    out = out..\"You wait a moment. Nothing happens. You wait a moment more. Still, nothing happens. Maybe you have outsmarted the trap, maybe it's just too old to still function (agility check passed). \n    In any case, you have the amulet. \";\n  } else {\n    out = out..\"You wait a moment. Nothing happens. You wait a moment more. Suddenly you hear a rumbling from somewhere in the chamber. The trap has been triggered (agility check failed). \";\n  }\n} else {\nout = out..\"You approach the pedestal, and the amulet is finally within reach. \nYou grab your prize, and closely examine it. But suddenly you hear a <i>'click'</i>. \nOnly now you notice that the top of the pedestal is a pressure plate (cunning check failed). Suddenly you here a rumbling from somewhere in the chamber. You have activated a trap. \";\n}\n\nif(trap_triggered) {\nout = out..\"You look around, and out of the darkness you see a huge, spherical bolder rolling towards you!\n\n<b>Yes, we're doing the Indiana Jones trap!</b>\n\nYou try to run, but the bolder is faster than you. You manage to jump to a more or less free space to the side, just in time that the bolder only scrapes you. \";\n\ndamage = random(5, 15) - globals.stats.power;\nglobals.health = max([globals.health - damage, 0]);\n\nout = out..\"You take \"..damage..\" damage. \";\n\n  if(globals.health <= 0) {\n    out = out..\"This is too much for you. You succumb to your wounds.\";\n    globals.story_step = \"dead\";\n    return out;\n  }else {\n    out = out..\"Annoying, but you have survived the bolder.\";\n  }\n}\n\nout = out..\"With the Amulet of Aniles in your bag you make your way upstairs again. After a short while, you emerge from the mountain and make your journey back to the start of your quest. \nFinally you reach the wizard, and hand him the amulet. Merlin looks pleased. He says: <i>'Thank you, \"..\nglobals.name..\". The kingdom is safe once more, thanks to your bravery!'</i>\n\nThis is the end of the story.\";\nif(!globals.logged_victory){\n  log(globals.name..\" has finished their quest!\");\n  globals.logged_victory = true;\n}\nsetVirtualItem(\"finished\", globals.name);\n\nout;","text":"<div>Generated Text</div>","listChoices":[],"subInputs":[]}],"relevance":"if(globals.story_step == \"dragon_vanquished\"){\nglobals.story_step = \"treasure_room\";\nreturn false;\n}\nglobals.story_step == \"treasure_room\";"},{"inputs":[{"responseType":"text","name":"death_info","text":"<div>Despite your bravery, you have perished. Your story is at its end...</div>","listChoices":[],"subInputs":[]}],"relevance":"init{\nglobals.reported_death = false;\n}\nif(globals.story_step == \"dead\"){\n  if(!globals.reported_death) {\n    log(globals.name..\" has perished!\");\n    globals.reported_death = true;\n    setVirtualItem(\"died\", globals.name);\n  }\n  return true;\n}\nreturn false;"}],"sumScores":[]},{"internalId":37721,"virtualInputs":[],"showPagination":false,"showSkipToast":false,"title":"Character","actionTriggers":[],"pages":[{"inputs":[{"responseType":"text","name":"char_info","relevance":"init{\nglobals.met_the_wizard = false;\n}\nglobals.met_the_wizard;","text":"<div>This is an overview of your character:</div>","listChoices":[],"subInputs":[]},{"responseType":"text","name":"char_sheet","relevance":"init{\nglobals.met_the_wizard = false;\n}\nglobals.met_the_wizard;","textScript":"init{globals.map = false;}\nout = \"<b>\"..globals.name..\", the \"..globals.class..\"</b>\n\nPower: <i>\"..globals.stats.power..\"</i>, Agility: <i>\"..globals.stats.agility..\"</i>, Cunning: <i>\"..\nglobals.stats.cunning..\"</i>\n\nHealth: <i>\"..globals.health..\"/\"..globals.max_health..\"</i>\";\n\nif(globals.health <= 0){\nout = out..\" (dead)\";\n}\nif(globals.map == true) {\nout = out..\"\n\nYou carry a map you found.\";\n}\n\nreturn out;","listChoices":[],"subInputs":[]},{"responseType":"text","name":"hint_wizard","relevance":"init{\nglobals.met_the_wizard = false;\n}\n!globals.met_the_wizard;","text":"<div>You have to introduce yourself to the wizard, before you can view your character!</div>","listChoices":[],"subInputs":[]}]}],"sumScores":[]}],"eventUploadSettings":{},"publicStatistics":{"charts":[]},"personalStatistics":{"charts":[{"title":"Health","chartDescription":"<div>This is how your character's health has changed over time.</div>","publicVariables":[],"axisContainer":[{"color":"#ff0000","label":"Health","xAxis":{"variableName":"name","observedVariableIndex":-1,"conditions":[]},"yAxis":{"variableName":"health","conditions":[]}}]}]},"pluginData":{"JodliDev_ESMiraSeal":{}}}