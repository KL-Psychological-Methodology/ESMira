{"id":7462,"version":5,"subVersion":5,"packageVersion":"3.4.3-alpha.8","serverVersion":11,"lang":"en","new_changes":true,"published":true,"accessKeys":["merlin"],"langCodes":["en"],"title":"Merlin Scripting Examples","questionnaires":[{"internalId":94490,"virtualInputs":[],"title":"Basic Page Relevance","actionTriggers":[],"pages":[{"inputs":[{"responseType":"binary","name":"marker_1","text":"<div>Show Page 2</div>","leftSideLabel":"No","rightSideLabel":"Yes","listChoices":[],"subInputs":[]},{"responseType":"likert","name":"marker_2","text":"<div>Show Page 3 if this is 3 or more.</div>","leftSideLabel":"1","rightSideLabel":"5","listChoices":[],"subInputs":[]}]},{"inputs":[{"responseType":"text","name":"page_2_text","text":"<div>This is page 2</div>","listChoices":[],"subInputs":[]}],"relevance":"getQuestionnaireVar(\"marker_1\");"},{"inputs":[{"responseType":"text","name":"page_3_text","text":"<div>This is page 3</div>","listChoices":[],"subInputs":[]}],"relevance":"getQuestionnaireVar(\"marker_2\") >= 3;"}],"sumScores":[]},{"internalId":86995,"virtualInputs":[],"title":"Basic Item Relevance","actionTriggers":[],"pages":[{"inputs":[{"responseType":"binary","name":"marker_item","text":"<div>Did you eat a meal since last filling out this questionnaire?</div>","leftSideLabel":"No","rightSideLabel":"Yes","listChoices":[],"subInputs":[]},{"name":"example_same_page","relevance":"// getQuestionnaireVar(\"marker_item\") returns an empty string \"\"\n// \"\" is different from 1, hence this is false (and the item is never shown)\ngetQuestionnaireVar(\"marker_item\") == 1;","text":"<div>This item will never be shown, as it's relevance gets evaluated before the above item is filled out.</div>","listChoices":[],"subInputs":[]}]},{"inputs":[{"responseType":"likert","name":"item_meal","relevance":"getQuestionnaireVar(\"marker_item\") == 1;","text":"<div>How was your meal</div>","leftSideLabel":"Not tasty","rightSideLabel":"Tasty","listChoices":[],"subInputs":[]},{"responseType":"likert","name":"stress","text":"<div>How stressed do you feel right now</div>","leftSideLabel":"Not at all","rightSideLabel":"Very stressed","listChoices":[],"subInputs":[]}]}],"sumScores":[]},{"internalId":96220,"virtualInputs":["phq_score"],"title":"Relevance From Score","actionTriggers":[],"pages":[{"header":"<div>Over the last 2 weeks, how often have you been bothered by any of the following problems?</div>","inputs":[{"responseType":"list_single","name":"phq-8_1","asDropDown":false,"forceInt":true,"text":"<div>Little interest or pleasure in doing things</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_2","asDropDown":false,"forceInt":true,"text":"<div>Feeling down, depressed, or hopeless</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_3","asDropDown":false,"forceInt":true,"text":"<div>Trouble falling or staying asleep, or sleeping too much</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_4","asDropDown":false,"forceInt":true,"text":"<div>Feeling tired or having little energy</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_5","asDropDown":false,"forceInt":true,"text":"<div>Poor appetite or overeating</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_6","asDropDown":false,"forceInt":true,"text":"<div>Feeling bad about yourself, or that you are a failure, or have let yourself or your family down</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_7","asDropDown":false,"forceInt":true,"text":"<div>Trouble concentrating on things, such as reading the newspaper or watching television</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]},{"responseType":"list_single","name":"phq-8_8","asDropDown":false,"forceInt":true,"text":"<div>Moving or speaking so slowly that other people could have noticed. Or the opposite â€“ being so fidgety or restless that you have been moving around a lot more than usual</div>","listChoices":["Not at all","Several days","More than half the days","Nearly every day"],"subInputs":[]}]},{"inputs":[{"responseType":"text","name":"very good intervention","text":"<div>Have you tried, like, not being depressed?</div>","listChoices":[],"subInputs":[]}],"relevance":"phq_items = getQuestionnaireVar([\"phq-8_1\", \"phq-8_2\", \"phq-8_3\", \"phq-8_4\", \"phq-8_5\", \"phq-8_6\", \"phq-8_7\", \"phq-8_8\"]);\nphq_score = sum(phq_items) - 8; // Niedrigster Listenwert in ESMira ist immer 1, -8 normiert auf gleichen Berich wie bei PHQ-8\nsetVirtualItem(\"phq_score\", phq_score);\nglobals.phq_score = phq_score;\nif(phq_score >= 20) { \n  log(\"Watch out for very high depression score: \"..phq_score);\n}\nreturn phq_score >= 10;"},{"inputs":[{"responseType":"text","name":"score_feedback","textScript":"if(globals.phq_score == none) {\n  return \"You haven't filled out enough items to calculate your score.\";\n} else {\n  return \"Your score is <b>\" .. globals.phq_score ..\"</b>.\";\n}","text":"<div>Because we have a Script in the Text Script field, whatever text is entered here will be replaced.</div>","listChoices":[],"subInputs":[]}]}],"sumScores":[]},{"internalId":31330,"endScriptBlock":"pet_preference = getQuestionnaireVar(\"pet_preference\");\nif(pet_preference == 0) {\n  globals.pet_preference = \"cats\";\n} else {\n  globals.pet_preference = \"dogs\";\n}","virtualInputs":[],"title":"Multi-questionnaire trigger 1","actionTriggers":[],"pages":[{"inputs":[{"responseType":"binary","name":"pet_preference","text":"<div>What do you prefer?</div><br><div>Depending on what you click, this will change the outcome of the other questionnaire ('<strong>Multi-questionnaire trigger 2</strong>').</div>","leftSideLabel":"Cats","rightSideLabel":"Dogs","listChoices":[],"subInputs":[]}]}],"sumScores":[]},{"internalId":89333,"virtualInputs":[],"title":"Multi-questionnaire trigger 2","actionTriggers":[],"pages":[{"header":"<div>Depending on what you choose in the \"<strong>Multi-questionnaire trigger 1</strong>\" questionnaire, you will see a cat, dog, or a horse if you did not give an answer to the previous questionnaire.</div>","inputs":[{"responseType":"image","name":"cat_photo","relevance":"init{\n  // If globals.pet_preference already is set, this will do nothing.\n  globals.pet_preference = \"horse\";\n}\nglobals.pet_preference == \"cats\";","text":"<div>Here, have a picture of a cat!</div>","url":"https://upload.wikimedia.org/wikipedia/commons/b/b6/Felis_catus-cat_on_snow.jpg","listChoices":[],"subInputs":[]},{"responseType":"image","name":"dog_photo","relevance":"init{\n  // If globals.pet_preference already is set, this will do nothing.\n  globals.pet_preference = \"horse\";\n}\nglobals.pet_preference == \"dogs\";","text":"<div>Here, have a picture of a dog!</div>","url":"https://upload.wikimedia.org/wikipedia/commons/d/d5/Retriever_in_water.jpg","listChoices":[],"subInputs":[]},{"responseType":"image","name":"horse_photo","relevance":"init{\n  // If globals.pet_preference already is set, this will do nothing.\n  globals.pet_preference = \"horse\";\n}\nglobals.pet_preference == \"horse\";","text":"<div>You will get horse pictures until you decide between cats and dogs.</div>","url":"https://upload.wikimedia.org/wikipedia/commons/d/de/Nokota_Horses_cropped.jpg","listChoices":[],"subInputs":[]}]}],"sumScores":[]},{"internalId":40820,"virtualInputs":[],"title":"Error Message","actionTriggers":[],"pages":[{"inputs":[{"responseType":"text","name":"error","relevance":"// accessing the value of the undefined variable \"undefined variable\" is an error\n// Note: The error checker in the web editor (currently) cannot catch this kind of error,\n// so the code looks fine here, but at runtime (in the app) this will cause an error.\na = 1;\nb = \"non-numeric string\";\nc = a - b;","text":"<div>This Item will cause an error</div>","listChoices":[],"subInputs":[]}]}],"sumScores":[]}],"eventUploadSettings":{},"publicStatistics":{"charts":[]},"personalStatistics":{"charts":[]},"pluginData":{"JodliDev_ESMiraSeal":{}}}